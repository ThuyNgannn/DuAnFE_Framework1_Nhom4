<app-admin-header></app-admin-header>
<div class="container mt-5">
    <h2 class="mb-4">Danh sách bài đăng</h2>
    <a class="btn btn-primary mb-3" [routerLink]="'/admin/post-add'">Thêm bài viết</a>
    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Tiêu đề</th>
                <th scope="col">Tác giả</th>
                <th scope="col">Loại</th>
                <th scope="col">Hình ảnh</th>
                <th scope="col">Ngày đăng</th>
                <th scope="col">Lượt thích</th>
                <th scope="col">Thao tác</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let post of posts; let i = index">
                <th scope="row">{{ i + 1 }}</th>
                <td>{{ post.title }}</td>
                <td>{{ post.author }}</td>
                <td>{{ getCategoryName(post.categoryId) }}</td>
                <td>
                    <img *ngIf="post.image" [src]="'http://localhost:3000/uploads/' + post.image" class="img-fluid img-thumbnail" style="max-width: 100px;" alt="Hình ảnh">
                    <span *ngIf="!post.image">Không có hình ảnh</span>
                </td>
                <td>{{ post.createdAt | date }}</td>
                <td>{{ post.likes }}</td>
                <td>
                    <button class="btn btn-primary btn-sm me-2" [routerLink]="'/admin/admin-post/' + post._id"><i class="bi bi-pencil"></i> Sửa</button>
                    <button class="btn btn-danger btn-sm" (click)="deletePost(post._id)"><i class="bi bi-trash"></i> Xóa</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>
